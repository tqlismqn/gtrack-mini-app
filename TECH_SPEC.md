# Модуль «Водители» — Техническое задание (V2.8)

> Проект: **G‑Track**  
> Дата: 20.09.2025  
> Автор: Product/BA  
> Основано на CR‑001…CR‑005 и объединённой спецификации V2.6

## 1) Цель и ценность
- Слева — **список водителей** (таблица с фильтрами и индикаторами).
- Справа — **карточка выбранного водителя** (детальные данные, документы, файлы).
- Ценность: контроль сроков, снижение рисков, единая база HR/диспетчеров/бухгалтерии.

## 2) Список водителей (левая колонка)
**Колонки:**
1) ФИО (жирным), ниже — email и телефон (мелким серым)
2) Статус: Активен | В отпуске | Неактивен | Уволен
3) Документы: бейджи — Просрочены / ≤30 / 31–60 / Актуальны / Без срока

**Фильтры:** поиск (ФИО/email/телефон), статус, статус документов, чекбокс **«Только граждане EU»** (по citizenship ∈ EU).

## 3) Карточка водителя (правая колонка)
### 3.1 Основные данные
- Внутренний № (уникальный порядковый, авто‑присвоение, неизменяем)
- ФИО, Дата рождения, Гражданство
- **Rodné číslo (RČ)** — отображать **только** если citizenship = CZ **или** есть виза с country=CZ
- Телефон, E‑mail, Адрес регистрации, Адрес проживания

### 3.2 Рабочая информация
- Дата найма / увольнения
- **Договор (Smlouva)**: От (обязательно), До (если срочный), флаг **«Доба неопределённая»** (скрывает «До»), кем подписан
- Локация (Praha / Kladno) с автоподстановкой адреса

### 3.3 Документы (каждый со статус‑индикатором по дате «До»)
- Паспорт — **№, До, Страна**
- Виза/Биометрия — **№, До**
- Прописка — **От, До**
- Лицензия (не водительские права) — **От, До**
- A1 (EU) — **От, До**
- **A1 Switzerland (A1 SW)** — **От, До** *(отдельный тип)*
- Declaration — **До**
- Pojištění (страховка) — **До**
- Cestovní pojištění — **До**
- Водительские права — **№, До**
- ADR — **До**
- Чип (тахокарта) — **№, До**
- Код 95 — **До**
- Медицинская prohlídka — **От, До**
- Psihotest — **Дата**; правило частоты: до 60 лет — раз в 3 года, после 60 — раз в год

### 3.4 Файлы и история
- Рядом с каждым документом: иконка **Загрузить/Просмотреть** (форматы: PDF/PNG/JPEG; рекомендуется PDF; ≤ 20 МБ)
- Храним **только последнюю** версию файла; предыдущие — в **истории** (дата/автор/имя)

### 3.5 Комментарии
- Текстовые комментарии + **1 файл‑вложение** (PDF/PNG/JPEG) на комментарий

### 3.6 Банковские данные
- CZ: номер счёта; Non‑CZ: IBAN + SWIFT

## 4) Напоминания
- Индикаторы: expired / soon (≤30) / warning (31–60) / valid / unknown
- Массовая отправка напоминаний выбранным водителям

## 5) Импорт/экспорт
- Импорт из Excel (листы трактуются как преднастроенные фильтры)
- Экспорт: Excel/PDF

## 6) Архитектура и роли
- Frontend (React/Vercel), Backend (Node.js/Nest **или** Python/FastAPI на Railway), DB (PostgreSQL)
- RBAC: Admin, HR, Dispatcher, Accounting, Driver
- AuditLog, GDPR (маскирование при экспорте)

## 7) Примечания
- Pas souhlas и Propiska CZ — поддерживаются как флаги
- Карточка **всегда справа** от списка (split‑layout)
